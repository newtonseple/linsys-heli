\subsection{Problem 1}
To get a better controller we want to use an observer to estimate some of the states, rather than using the derivative of the output. To make the observer we need a model of the system with all the sattes, both measured, and those we want to estimate. This model can be written as

\begin{subequations}
	\begin{align*}
		\mbf{\dot x} &= \mbf{A}\mbf{x} + \mbf{B}\mbf{u}\\
		\mbf{y} &= \mbf{C}\mbf{x}
	\end{align*}
\end{subequations}

where the vectors $\mbf{x}$, $\mbf{u}$ and $\mbf{y}$, and the matrices $\mbf{A}$, $\mbf{B}$ and $\mbf{C}$ are given by

\begin{subequations}
	\begin{align}
		\mbf{x} &= \begin{bmatrix}
			\tilde p\\
			\dot{\tilde p}\\
			\tilde e\\
			\dot{\tilde e}\\
			\tilde \lambda\\
			\dot{\tilde \lambda}
			\end{bmatrix}, 
		\mbf{u} = \begin{bmatrix}
			\tilde V_s\\
			\tilde V_d
			\end{bmatrix} \text{and} \ 
		\mbf{y} = \begin{bmatrix}
			\tilde p\\
			\tilde e\\
			\tilde \lambda
			\end{bmatrix}\\
		\mbf{A} &= \begin{bmatrix}
			0 & 1 & 0 & 0 & 0 & 0\\
			0 & 0 & 0 & 0 & 0 & 0\\ 
			0 & 0 & 0 & 1 & 0 & 0\\
			0 & 0 & 0 & 0 & 0 & 0\\
			0 & 0 & 0 & 0 & 0 & 1\\
			K_3 & 0 & 0 & 0 & 0 & 0
			\end{bmatrix}\\
		\mbf{B} &= \begin{bmatrix}
			0 & 0\\
			0 & K_1 &\\
			0 & 0\\
			K_2 & 0\\
			0 & 0\\
			0 & 0	
			\end{bmatrix}\\
		\mbf{C} &= \begin{bmatrix}
			1 & 0 & 0 & 0 & 0 & 0\\
			0 & 0 & 1 & 0 & 0 & 0\\
			0 & 0 & 0 & 0 & 1 & 0
			\end{bmatrix}
	\end{align}
\end{subequations}
